<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elastic Collision Brownian Motion</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header>
        <h1>ðŸ”¬ Brownian Motion</h1>
        <p>Simulation of a large particle being randomly pushed by many small thermal particles</p>
    </header>

    <main>
        <div class="simulation-container">
            <div class="simulation-panel">
                <canvas id="simulation-canvas"></canvas>
                <div class="simulation-controls">
                    <div class="button-row">
                        <button id="reset-btn">Reset Simulation</button>
                        <button id="pause-btn">Pause</button>
                    </div>
                    <div class="controls-row">
                        <div class="particle-count-control">
                            <label for="particle-count">Thermal Particles:</label>
                            <input type="range" id="particle-count" min="800" max="2000" value="1200" step="200">
                            <span id="particle-count-value">1200</span>
                        </div>
                        <div class="particle-count-control">
                            <label for="particle-temperature">Temperature (kT):</label>
                            <input type="range" id="particle-temperature" min="0.1" max="2.0" value="0.5" step="0.1">
                            <span id="particle-temperature-value">0.5</span>
                        </div>
                        <div class="particle-count-control">
                            <label for="world-size">Field Size:</label>
                            <input type="range" id="world-size" min="100" max="300" value="150" step="25">
                            <span id="world-size-value">150</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="analysis-panel">
                <div class="stats-section">
                    <h3>ðŸ“Š Essential Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <label>Time Steps:</label>
                            <span id="ticks-value">0</span>
                        </div>
                        <div class="stat-item">
                            <label>Particle Velocity:</label>
                            <span id="velocity-value">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Collisions:</label>
                            <span id="collision-count">0</span>
                        </div>
                        <div class="stat-item">
                            <label>Is Brownian Motion?</label>
                            <span id="brownian-indicator">Initializing...</span>
                        </div>
                        <div class="stat-item">
                            <label>Decay Time:</label>
                            <span id="velocity-decay-time">N/A</span>
                        </div>
                        <div class="stat-item">
                            <label>Velocity Data Points:</label>
                            <span id="velocity-data-points">0</span>
                        </div>
                    </div>
                </div>

                <div class="chart-section">
                    <h3>ðŸŽ¯ Velocity Autocorrelation</h3>
                    <p style="font-size: 14px; color: #666; margin-bottom: 10px;">
                        <strong>What you see:</strong> The graph shows how much the particle "remembers" its direction. 
                        In Brownian motion, this memory is lost quickly (the curve drops toward zero).
                    </p>
                    <div class="chart-container">
                        <canvas id="velocity-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <details>
                <summary>ðŸ¤” What is Velocity Autocorrelation?</summary>
                <div class="info-content">
                    <h4>ðŸŽ¯ Simple Concept</h4>
                    <p><strong>Velocity autocorrelation</strong> measures how long a particle "remembers" its direction of movement.</p>
                    
                    <h4>ðŸ“Š How to Read the Graph</h4>
                    <ul>
                        <li><strong>Lag 0:</strong> Correlation is always 1 (perfect correlation with itself)</li>
                        <li><strong>Lag 1, 2, 3...</strong> If the curve drops quickly toward zero, the particle "forgets" direction quickly â†’ Brownian Motion!</li>
                        <li><strong>Curve stays high:</strong> Particle maintains direction â†’ Persistent movement (not Brownian)</li>
                    </ul>

                    <h4>ðŸ”¬ Simulation</h4>
                    <ul>
                        <li><strong>Large Particle:</strong> The one we observe</li>
                        <li><strong>Small Particles:</strong> The "thermal bath" that bombards the large particle</li>
                        <li><strong>Elastic Collisions:</strong> Transfer momentum randomly</li>
                    </ul>

                    <h4>ðŸŽ¯ What to Expect</h4>
                    <p><strong>EMERGENT BROWNIAN MOTION:</strong> Initially the particle is at rest. Thermal particles bombard it randomly. The large particle starts moving randomly, and velocity autocorrelation decays quickly, showing the loss of directional "memory" typical of Brownian motion.</p>
                </div>
            </details>
        </div>
    </main>

    <script type="module" src="./index.ts"></script>
</body>
</html>