<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elastic Collision Brownian Motion</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header>
        <h1>üî¨ Emergent Brownian Motion Simulation</h1>
        <p><strong>PHYSICS CORRECTED:</strong> Pure emergent Brownian motion from elastic collisions with Maxwell-Boltzmann thermal bath</p>
    </header>

    <main>
        <div class="simulation-container">
            <div class="simulation-panel">
                <canvas id="simulation-canvas"></canvas>
                <div class="simulation-controls">
                    <div class="button-row">
                        <button id="reset-btn">Reset Simulation</button>
                        <button id="pause-btn">Pause</button>
                        <button id="reset-msd-btn">Reset MSD</button>
                    </div>
                    <div class="controls-row">
                        <div class="particle-count-control">
                            <label for="particle-count">Thermal Particles:</label>
                            <input type="range" id="particle-count" min="1000" max="3000" value="2000" step="250">
                            <span id="particle-count-value">2000</span>
                        </div>
                        <div class="particle-count-control">
                            <label for="particle-temperature">Temperature (kT):</label>
                            <input type="range" id="particle-temperature" min="0.1" max="2.0" value="0.5" step="0.1">
                            <span id="particle-temperature-value">0.5</span>
                        </div>
                        <div class="particle-count-control">
                            <label for="world-size">Field Size:</label>
                            <input type="range" id="world-size" min="100" max="300" value="150" step="25">
                            <span id="world-size-value">150</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="analysis-panel">
                <div class="stats-section">
                    <h3>Real-time Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <label>Time Steps:</label>
                            <span id="ticks-value">0</span>
                        </div>
                        <div class="stat-item">
                            <label>Current MSD:</label>
                            <span id="msd-value">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Collisions:</label>
                            <span id="collision-count">0</span>
                        </div>
                        <div class="stat-item">
                            <label>Large Particle Speed:</label>
                            <span id="velocity-value">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Total Displacement:</label>
                            <span id="displacement-value">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Brownian Motion:</label>
                            <span id="brownian-indicator">Initializing...</span>
                        </div>
                    </div>
                    
                    <h4>‚öõÔ∏è Physics Diagnostics</h4>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <label>Diffusion Coeff (D):</label>
                            <span id="diffusion-coeff">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Expected D:</label>
                            <span id="theoretical-diffusion">0.25</span>
                        </div>
                        <div class="stat-item">
                            <label>Equipartition ‚ü®v¬≤‚ü©:</label>
                            <span id="equipartition-value">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Expected ‚ü®v¬≤‚ü©:</label>
                            <span id="theoretical-equipartition">0.050</span>
                        </div>
                        <div class="stat-item">
                            <label>Velocity œÑ (ticks):</label>
                            <span id="velocity-decay-time">0</span>
                        </div>
                        <div class="stat-item">
                            <label>Expected œÑ:</label>
                            <span id="theoretical-decay-time">16.7</span>
                        </div>
                    </div>
                </div>

                <div class="chart-section">
                    <h3>Mean Squared Displacement</h3>
                    <div class="chart-container">
                        <canvas id="msd-chart"></canvas>
                    </div>
                </div>

                <div class="chart-section">
                    <h3>Velocity Autocorrelation</h3>
                    <div class="chart-container">
                        <canvas id="velocity-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <details>
                <summary>Simulation Details</summary>
                <div class="info-content">
                    <h4>‚úÖ CORRECTED Physics Model</h4>
                    <ul>
                        <li><strong>Large Particle:</strong> Mass = 20, Radius = 6, Pure Newtonian motion</li>
                        <li><strong>Thermal Particles:</strong> 2000 particles, Mass = 1, Radius = 1.5, Maxwell-Boltzmann T=0.5</li>
                        <li><strong>Collisions:</strong> Perfect elastic collisions with exact conservation laws</li>
                        <li><strong>NO Langevin:</strong> Brownian motion emerges naturally from collisions</li>
                        <li><strong>Boundary:</strong> Perfect elastic reflection (no randomness)</li>
                    </ul>
                    <h4>üéØ Theoretical Predictions</h4>
                    <ul>
                        <li><strong>Expected D:</strong> Estimated from collision frequency and mass transfer (D ~ kT/Œ≥_eff)</li>
                        <li><strong>Expected ‚ü®v¬≤‚ü©:</strong> From equipartition theorem: ‚ü®v¬≤‚ü© = 2kT/M in 2D</li>
                        <li><strong>Temperature Control:</strong> Maxwell-Boltzmann thermal bath at adjustable temperature</li>
                        <li><strong>Mass Ratio:</strong> Optimized 20:1 ratio for observable Brownian emergence</li>
                    </ul>

                    <h4>üî¨ Expected Physical Behavior</h4>
                    <p><strong>EMERGENT BROWNIAN MOTION:</strong> Large particle starts at rest. Thermal particles follow Maxwell-Boltzmann distribution and move deterministically between collisions. Perfect elastic collisions transfer momentum randomly due to thermal bombardment. The large particle exhibits true Brownian motion: linear MSD growth, velocity decorrelation, and statistical randomness emerging from deterministic physics.</p>
                </div>
            </details>
        </div>
    </main>

    <script type="module" src="./index.ts"></script>
</body>
</html>