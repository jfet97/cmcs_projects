<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elastic Collision Brownian Motion</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header>
        <h1>Elastic Collision Brownian Motion Simulation</h1>
        <p>Demonstrating Brownian motion through elastic collisions between one large particle and many small particles</p>
    </header>

    <main>
        <div class="simulation-container">
            <div class="simulation-panel">
                <canvas id="simulation-canvas"></canvas>
                <div class="simulation-controls">
                    <div class="button-row">
                        <button id="reset-btn">Reset Simulation</button>
                        <button id="pause-btn">Pause</button>
                    </div>
                    <div class="controls-row">
                        <div class="particle-count-control">
                            <label for="particle-count">Small Particles:</label>
                            <input type="range" id="particle-count" min="100" max="1000" value="500" step="50">
                            <span id="particle-count-value">500</span>
                        </div>
                        <div class="particle-count-control">
                            <label for="particle-speed">Speed:</label>
                            <input type="range" id="particle-speed" min="1" max="10" value="4" step="0.5">
                            <span id="particle-speed-value">4.0</span>
                        </div>
                        <div class="particle-count-control">
                            <label for="world-size">Field Size:</label>
                            <input type="range" id="world-size" min="100" max="500" value="200" step="25">
                            <span id="world-size-value">200</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="analysis-panel">
                <div class="stats-section">
                    <h3>Real-time Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <label>Time Steps:</label>
                            <span id="ticks-value">0</span>
                        </div>
                        <div class="stat-item">
                            <label>Current MSD:</label>
                            <span id="msd-value">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Collisions:</label>
                            <span id="collision-count">0</span>
                        </div>
                        <div class="stat-item">
                            <label>Large Particle Speed:</label>
                            <span id="velocity-value">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Total Displacement:</label>
                            <span id="displacement-value">0.00</span>
                        </div>
                        <div class="stat-item">
                            <label>Brownian Motion:</label>
                            <span id="brownian-indicator">Initializing...</span>
                        </div>
                    </div>
                </div>

                <div class="chart-section">
                    <h3>Mean Squared Displacement</h3>
                    <div class="chart-container">
                        <canvas id="msd-chart"></canvas>
                    </div>
                </div>

                <div class="chart-section">
                    <h3>Velocity Autocorrelation</h3>
                    <div class="chart-container">
                        <canvas id="velocity-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <details>
                <summary>Simulation Details</summary>
                <div class="info-content">
                    <h4>Physics Model</h4>
                    <ul>
                        <li><strong>Large Particle:</strong> Mass = 50, Radius = 8, Initially at rest</li>
                        <li><strong>Small Particles:</strong> Mass = 1, Radius = 1.5, Random thermal motion</li>
                        <li><strong>Collisions:</strong> Fully elastic with momentum and energy conservation</li>
                        <li><strong>Boundary:</strong> Elastic reflection at walls</li>
                    </ul>
                    
                    <h4>Brownian Motion Indicators</h4>
                    <ul>
                        <li><strong>MSD Growth:</strong> Should increase linearly with time (slope > 0)</li>
                        <li><strong>Velocity Autocorrelation:</strong> Should decay to zero (memoryless motion)</li>
                        <li><strong>Motion Character:</strong> Random, non-directional displacement</li>
                    </ul>

                    <h4>Expected Behavior</h4>
                    <p>The large red particle starts at rest. Small blue particles undergo random thermal motion and collide elastically with the large particle, transferring momentum. Over time, the cumulative effect of these random collisions should cause the large particle to exhibit characteristic Brownian motion - erratic, continuous movement with no preferred direction.</p>
                </div>
            </details>
        </div>
    </main>

    <script type="module" src="./index.ts"></script>
</body>
</html>